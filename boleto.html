<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Boleto Vencido com Multa e Juros | Atualiza√ß√£o de Boleto</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Atualize seus boletos vencidos com precis√£o. Calcule automaticamente multa, juros e valor atualizado de forma simples e gratuita.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
        --primary-color: #2c3e50;
        --secondary-color: #3498db;
        --success-color: #2ecc71;
        --background-color: #f4f6f7;
        --text-color: #34495e;
        --card-bg-color: #ffffff;
        --border-color: #dfe4ea;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      background: var(--background-color);
      color: var(--text-color);
      line-height: 1.6;
    }
    .conteudo {
      max-width: 700px;
      padding: 20px;
      margin: 2rem auto;
      background-color: var(--card-bg-color);
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    }
    h1 {
      font-family: 'Montserrat', sans-serif;
      text-align: center;
      color: var(--primary-color);
      font-size: 1.8rem;
      margin-bottom: 2rem;
    }
    .form-group {
        margin-bottom: 1.25rem;
    }
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    .form-control {
      width: 100%;
      padding: 12px;
      border: 1px solid var(--border-color);
      border-radius: 6px;
      font-size: 1rem;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .form-control:focus {
        outline: none;
        border-color: var(--secondary-color);
        box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
    }
    .form-text {
        font-size: 0.85rem;
        color: #6c757d;
        margin-top: 0.25rem;
        display: block;
    }
    .btn {
      margin-top: 20px;
      width: 100%;
      padding: 12px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 500;
      transition: background-color 0.2s;
    }
    .btn:hover { background: #34495e; }
    .btn.calculating {
        background-color: #5a6d80;
        cursor: not-allowed;
    }
    .trust-badge {
        text-align: center;
        margin-top: 1rem;
        font-size: 0.9rem;
        color: #6c757d;
    }
    .erro {
      margin-top: 20px;
      background: #ffe0e0;
      padding: 15px;
      border-radius: 6px;
      color: #900;
    }
    .link-voltar {
      margin-top: 20px;
      display: block;
      text-align: center;
      text-decoration: none;
      color: var(--primary-color);
      font-weight: 500;
    }
    /* Card de Resultado */
    .result-card {
        background-color: #f8f9fa;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        margin-top: 2rem;
        overflow: hidden;
    }
    .result-header {
        padding: 1rem 1.5rem;
        background-color: #e9ecef;
    }
    .result-body {
        padding: 1.5rem;
        display: grid;
        gap: 1rem;
    }
    .result-body p {
        margin: 0;
        display: flex;
        justify-content: space-between;
    }
    .result-body p strong { color: var(--primary-color); }
    .result-footer {
        padding: 1rem 1.5rem;
        background-color: #e9ecef;
        text-align: center;
    }
    .result-total {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--success-color);
    }
    #copyButton {
        background-color: var(--success-color);
        margin-top: 1rem;
    }
    #copyButton:hover {
        background-color: #27ae60;
    }
    .seo-content {
      padding: 2rem;
      font-size: 0.95em;
      color: #444;
      line-height: 1.6;
      max-width: 900px;
      margin: 2rem auto;
      background-color: var(--card-bg-color);
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }
    .seo-content h2, .seo-content h3 {
      font-family: 'Montserrat', sans-serif;
      color: var(--primary-color);
      margin-bottom: 1rem;
    }
    .disclaimer-box {
        background-color: #fffbe6;
        border: 1px solid #ffe58f;
        color: #8a6d3b;
        padding: 1.5rem;
        border-radius: 8px;
        margin-top: 2rem;
    }
    .disclaimer-box h4 {
        margin-top: 0;
        color: #66512c;
    }
  </style>
</head>
<body>
  <div class="conteudo">
    <div id="app"></div>
  </div>

  <div class="seo-content">
    <h2>Tudo Sobre a Atualiza√ß√£o de Boletos</h2>
    <p>O <strong>AtualizaBoleto.com</strong> √© sua ferramenta online e gratuita para <strong>calcular o valor atualizado de boletos vencidos</strong>. Basta informar a data de vencimento, o valor original, os percentuais de multa e juros, e a data estimada de pagamento. O sistema calcula instantaneamente o valor atualizado com base nas regras mais comuns do mercado.</p>
    <p>Se voc√™ precisa saber quanto pagar ap√≥s o vencimento do boleto, aqui √© o lugar certo. Seja para <strong>contas atrasadas</strong>, <strong>boletos banc√°rios</strong> ou cobran√ßas com <strong>juros di√°rios</strong>, nossa calculadora considera o tempo de atraso e aplica a corre√ß√£o proporcional ao per√≠odo vencido.</p>
    <h3>C√°lculo R√°pido e Gratuito</h3>
    <p>Evite surpresas no pagamento e antecipe o valor correto. Use agora o AtualizaBoleto.com ‚Äî gratuito, r√°pido e online. Ideal para pessoas f√≠sicas, pequenas empresas e profissionais liberais que lidam com boletos vencidos.</p>
    <div class="disclaimer-box">
        <h4>Aviso Importante</h4>
        <p>Este c√°lculo √© uma simula√ß√£o e serve apenas como refer√™ncia. N√£o nos responsabilizamos por decis√µes ou preju√≠zos decorrentes da utiliza√ß√£o deste sistema. Para c√°lculos oficiais, consulte sua institui√ß√£o financeira.</p>
    </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const feriadosFixos = ["01-01", "21-04", "01-05", "07-09", "12-10", "02-11", "15-11", "25-12"];

    function isFeriadoNacional(date) {
      const d = new Date(date.valueOf() + date.getTimezoneOffset() * 60000);
      const diaMes = ("0" + d.getDate()).slice(-2) + "-" + ("0" + (d.getMonth() + 1)).slice(-2);
      return feriadosFixos.includes(diaMes);
    }

    function isDiaUtil(date) {
        const diaSemana = date.getDay();
        return !(diaSemana === 0 || diaSemana === 6 || isFeriadoNacional(date));
    }

    function diasEntreDatas(data1, data2) {
      const d1 = new Date(data1);
      const d2 = new Date(data2);
      return Math.floor((d2 - d1) / (1000 * 60 * 60 * 24));
    }

    function formatarMoeda(valor) {
      return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    function formatarDataBR(dataStr) {
      const [ano, mes, dia] = dataStr.split('-');
      return `${dia}/${mes}/${ano}`;
    }

    function mostrarFormulario(dados = {}) {
      document.getElementById('app').innerHTML = `
        <h1>Calcule e Atualize seu Boleto Atrasado na Hora</h1>
        <form id="boletoForm" method="GET">
          <div class="form-group">
            <label for="vencimento">Data de Vencimento:</label>
            <input class="form-control" type="date" id="vencimento" name="vencimento" required value="${dados.vencimento || ''}">
          </div>
          <div class="form-group">
            <label for="valor">Valor Original (R$):</label>
            <input class="form-control" type="number" id="valor" name="valor" step="0.01" required value="${dados.valor || ''}" placeholder="Ex: 100,00" inputmode="decimal">
          </div>
          <div class="form-group">
            <label for="multa">Multa (%):</label>
            <input class="form-control" type="number" id="multa" name="multa" step="0.01" required value="${dados.multa || 2}" placeholder="Ex: 2" inputmode="decimal">
            <small class="form-text">Multa por atraso aplicada uma √∫nica vez sobre o valor original.</small>
          </div>
          <div class="form-group">
            <label for="juros">Juros ao m√™s (%):</label>
            <input class="form-control" type="number" id="juros" name="juros" step="0.01" required value="${dados.juros || 1}" placeholder="Ex: 1" inputmode="decimal">
            <small class="form-text">Juros aplicados por dia de atraso (pro rata die).</small>
          </div>
          <div class="form-group">
            <label for="pagamento">Data de Pagamento:</label>
            <input class="form-control" type="date" id="pagamento" name="pagamento" required value="${dados.pagamento || ''}">
          </div>
          <button id="calcButton" type="submit" class="btn">Calcular</button>
          <p class="trust-badge">üîí C√°lculo seguro. Seus dados n√£o s√£o armazenados.</p>
        </form>
      `;
      document.getElementById('boletoForm').addEventListener('submit', function(e) {
          const btn = document.getElementById('calcButton');
          btn.textContent = 'Calculando...';
          btn.classList.add('calculating');
          btn.disabled = true;
      });
    }

    function mostrarErro(mensagens) {
      document.getElementById('app').innerHTML = `
        <h1>Ops! Algo deu errado</h1>
        <div class="erro">
          <strong>Por favor, corrija os seguintes erros:</strong><br/>
          <ul>
            ${mensagens.map(msg => `<li>${msg}</li>`).join('')}
          </ul>
        </div>
        <a class="link-voltar" href="?${urlParams.toString()}&refazer=1">Tentar Novamente</a>
      `;
    }

    function copiarResultadoParaClipboard() {
        const params = new URLSearchParams(window.location.search);
        const venc = params.get('vencimento');
        const valor = parseFloat(params.get('valor'));
        const multaPct = parseFloat(params.get('multa'));
        const jurosMensalPct = parseFloat(params.get('juros'));
        const pagamento = params.get('pagamento');
        
        let aplicarMultaEJuros = true;
        const dataVenc = new Date(venc + "T12:00:00");
        const dataPag = new Date(pagamento + "T12:00:00");

        if (!isDiaUtil(dataVenc)) {
            let proximoDiaUtil = new Date(dataVenc);
            proximoDiaUtil.setDate(proximoDiaUtil.getDate() + 1);
            while (!isDiaUtil(proximoDiaUtil)) {
                proximoDiaUtil.setDate(proximoDiaUtil.getDate() + 1);
            }
            if (dataPag <= proximoDiaUtil) {
                aplicarMultaEJuros = false;
            }
        }

        const diasAtraso = diasEntreDatas(venc, pagamento);
        const multa = aplicarMultaEJuros ? valor * (multaPct / 100) : 0;
        const jurosDia = (jurosMensalPct / 100) / 30;
        const juros = aplicarMultaEJuros ? valor * jurosDia * diasAtraso : 0;
        const valorFinal = valor + multa + juros;

        const linkRecalculo = `${window.location.origin}${window.location.pathname}?${params.toString()}`;
        const textoParaCopiar = `
--- Resumo do Boleto ---
Data de Vencimento: ${formatarDataBR(venc)}
Data de Pagamento: ${formatarDataBR(pagamento)}
Dias em atraso: ${diasAtraso} dias
Valor original: ${formatarMoeda(valor)}
Multa (${multaPct}%): ${formatarMoeda(multa)}
Juros (${jurosMensalPct}% ao m√™s): ${formatarMoeda(juros)}
Total atualizado: ${formatarMoeda(valorFinal)}
-------------------------

Para recalcular ou ver os detalhes, acesse o link:
${linkRecalculo}
        `.trim();

        navigator.clipboard.writeText(textoParaCopiar).then(() => {
            const copyButton = document.getElementById('copyButton');
            copyButton.textContent = 'Copiado com Sucesso!';
            setTimeout(() => {
                copyButton.textContent = 'Copiar Resultado e Link';
            }, 3000);
        }).catch(err => {
            console.error('Falha ao copiar texto: ', err);
            alert('N√£o foi poss√≠vel copiar o texto.');
        });
    }

    function mostrarResultado(params) {
      const venc = params.get('vencimento');
      const valor = parseFloat(params.get('valor'));
      const multaPct = parseFloat(params.get('multa'));
      const jurosMensalPct = parseFloat(params.get('juros'));
      const pagamento = params.get('pagamento');

      const erros = [];
      if (new Date(pagamento) <= new Date(venc)) {
        erros.push("A data de pagamento deve ser posterior √† data de vencimento.");
      }
      if (isNaN(valor) || valor < 0) erros.push("O valor original √© inv√°lido.");
      if (isNaN(multaPct) || multaPct < 0) erros.push("O percentual de multa √© inv√°lido.");
      if (isNaN(jurosMensalPct) || jurosMensalPct < 0) erros.push("O percentual de juros √© inv√°lido.");

      if (erros.length > 0) {
        mostrarErro(erros);
        return;
      }

      let aplicarMultaEJuros = true;
      const dataVenc = new Date(venc + "T12:00:00");
      const dataPag = new Date(pagamento + "T12:00:00");

      if (!isDiaUtil(dataVenc)) {
          let proximoDiaUtil = new Date(dataVenc);
          proximoDiaUtil.setDate(proximoDiaUtil.getDate() + 1);
          while (!isDiaUtil(proximoDiaUtil)) {
              proximoDiaUtil.setDate(proximoDiaUtil.getDate() + 1);
          }
          if (dataPag <= proximoDiaUtil) {
              aplicarMultaEJuros = false;
          }
      }

      const diasAtraso = diasEntreDatas(venc, pagamento);
      const multa = aplicarMultaEJuros ? valor * (multaPct / 100) : 0;
      const jurosDia = (jurosMensalPct / 100) / 30;
      const juros = aplicarMultaEJuros ? valor * jurosDia * diasAtraso : 0;
      const valorFinal = valor + multa + juros;
      const resumo = `Seu boleto com vencimento em ${formatarDataBR(venc)} est√° com ${diasAtraso} dias de atraso.`;

      document.getElementById('app').innerHTML = `
        <h1>C√°lculo Realizado</h1>
        <div class="result-card">
            <div class="result-header">
                <p>${resumo}</p>
            </div>
            <div class="result-body">
                <p><span>Data de Vencimento:</span> <strong>${formatarDataBR(venc)}</strong></p>
                <p><span>Data de Pagamento:</span> <strong>${formatarDataBR(pagamento)}</strong></p>
                <p><span>Valor Original:</span> <strong>${formatarMoeda(valor)}</strong></p>
                <p><span>Multa (${multaPct}%):</span> <strong>${formatarMoeda(multa)}</strong></p>
                <p><span>Juros (${jurosMensalPct}% a.m.):</span> <strong>${formatarMoeda(juros)}</strong></p>
            </div>
            <div class="result-footer">
                <span>Valor Final Atualizado:</span>
                <div class="result-total">${formatarMoeda(valorFinal)}</div>
            </div>
        </div>
        <button id="copyButton" class="btn" onclick="copiarResultadoParaClipboard()">Copiar Resultado e Link</button>
        <a class="link-voltar" href="?${params.toString()}&refazer=1">Calcular Novamente</a>
      `;
    }

    if (urlParams.has('valor') && urlParams.has('vencimento') && urlParams.has('pagamento')) {
      if (urlParams.get('refazer')) {
        mostrarFormulario({
          valor: urlParams.get('valor'),
          vencimento: urlParams.get('vencimento'),
          multa: urlParams.get('multa'),
          juros: urlParams.get('juros'),
          pagamento: urlParams.get('pagamento')
        });
      } else {
        mostrarResultado(urlParams);
      }
    } else {
      const today = new Date().toISOString().split('T')[0];
      mostrarFormulario({ pagamento: today });
    }
  
  </script>
</body>
</html>
